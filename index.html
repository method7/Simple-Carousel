<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-gb" xml:lang="en-gb">
  <head>
		<title>Simple jQuery Carousel</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta http-equiv="content-language" content="en-gb" />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
        <script type="text/javascript">
            
            $(window).load(function () {
                carousel.init();
            });
            var carousel = {
                // global properties
                carouselLeader: 'm7_carousel',
                fwdButton: 'next',
                revButton: 'pre',
                lockedClass: 'locked',
                disabledClass: 'disabled',
                itemOnClass: 'm7_itemOn',

                init: function () { // initalise the carousel
                    "use strict";
                    var myCarousel = $('.carousel');
                    if (myCarousel) { //build carousel
                        myCarousel.find('ul').each(function (i) {
                            var carId = carousel.carouselLeader + '-' + i,
                                navItems = carousel.buildNav($(this)),  //build carousel navigation
                                thisCarousel = '',
                                carNav = '';

                            $(this).wrap('<div id="' + carId + '" class="' + carousel.carouselLeader + '" />');
                            thisCarousel = $('#' + carId);
                            thisCarousel.append('<ol class="' + carousel.carouselLeader
                                + 'Nav"><li rel="rev"><a id="'
                                + carousel.revButton + '" class="'
                                + carousel.disabledClass + '" href="#">previous</a></li>' + navItems
                                + '<li rel="fwd"><a id="' + carousel.fwdButton
                                + '" href="#">next</a></li></ol>');
                            carNav = thisCarousel.find('ol');
                            carousel.setWidth(thisCarousel);
                            carousel.moveCarousel(thisCarousel, carNav);
                        });
                    }
                },
                moveCarousel: function (thisCarousel, carNav) { // bind click event - single itteration to next slide
                    "use strict";
                    var carousleButton = carNav.find('li');
                    carousleButton.bind('click.moveCarousel', function (e) {
                        e.preventDefault();
                        var clickedTest = $(this).attr('rel'),
                            reg = new RegExp('^[0-9]$'),
                            clicked = reg.test(clickedTest) && (clickedTest || 1),
                            locked = $(this).hasClass(carousel.lockedClass),
                            position = carousel.getNavPosition(carNav);

                        if (reg.test(clickedTest)) { // if jump number
                            if (clicked > position && locked !== true) {
                                carousel.animate(thisCarousel, carNav, clicked, true, true);
                            } else if (clicked < position) {
                                carousel.animate(thisCarousel, carNav, clicked, false, true);
                            }
                        } else {
                            if (clickedTest === 'fwd') { // if fwd
                                if (carousel.getNavPosition(carNav) !== carousel.getNavLength(carNav) - 1 && locked !== true) {
                                    carousel.animate(thisCarousel, carNav, clicked, true, false);
                                }
                            } else { // if rev
                                if (carousel.getNavPosition(carNav) > 0 && locked !== true) {
                                    carousel.animate(thisCarousel, carNav, clicked, false, false);
                                }
                            }
                        }
                    });
                },
                animate: function (thisCarousel, carNav, clicked, fwd, jump) { // calculate the movment values and directions then animate the carousel
                    "use strict";
                    carNav.find('li').addClass(carousel.lockedClass);
                    var carouselItems = thisCarousel.find('ul'),
                        itemWidth = parseInt(carouselItems.find('li').width(), 10),
                        position = carousel.getNavPosition(carNav);

                    if (!jump) { // itterate switch
                        if (!fwd) { // itterate rev
                            position = position - 1;
                            itemWidth = '+=' + '+' + itemWidth;
                        } else { // itterate fwd
                            position = position + 1;
                            itemWidth = '+=' + '-' + itemWidth;
                        }
                    } else { // jump
                        position = clicked;
                        itemWidth = '-' + parseInt((itemWidth * clicked), 10);
                    }
                    carouselItems.animate({ // animate 
                        'left': itemWidth
                    }, 250, function () { //callback
                        carousel.setNavPosition(carNav, position);
                    });
                },
                getNavLength: function (carNav) { // return the navigation length - ignore the #fwd and #back buttons
                    "use strict";
                    return parseInt((carNav.find('li').length - 2), 10);
                },
                getNavPosition: function (carNav) { // return the carousel position - only the nav is marked
                    "use strict";
                    return parseInt(carNav.find('.' + carousel.itemOnClass).attr('rel'), 10);
                },
                setNavPosition: function (carNav, position) { // set the navigation position and add/remove disabled class to useless buttons
                    "use strict";
                    carNav.find('.' + carousel.itemOnClass).removeClass(carousel.itemOnClass);
                    carNav.find('li[rel="' + position + '"]').addClass(carousel.itemOnClass);
                    carNav.find('li').removeClass(carousel.lockedClass);

                    var revButton = carNav.find('#' + carousel.revButton),
                        fwdButton = carNav.find('#' + carousel.fwdButton),
                        navPosition = carousel.getNavPosition(carNav);
                    if (navPosition === 0) {
                        revButton.addClass(carousel.disabledClass);
                    } else {
                        revButton.removeClass(carousel.disabledClass);
                    }
                    if (navPosition === carousel.getNavLength(carNav) - 1) {
                        fwdButton.addClass(carousel.disabledClass);
                    } else {
                        fwdButton.removeClass(carousel.disabledClass);
                    }
                },
                setWidth: function (thisCarousel) { // set the carousel width based on the css width set and number of li elements
                    "use strict";
                    var carouselContainer = thisCarousel.find('ul'),
                        carouselItems = carouselContainer.find('li');

                    carouselContainer.width(carouselItems.length * carouselItems.outerWidth());
                },
                buildNav: function (thisCarousel) { // build the carousel navigation items
                    "use strict";
                    var item = '',
                        activeSlide = '';
                    thisCarousel.find('li').each(function (i) {
                        if (i === (0)) {
                            activeSlide = carousel.itemOnClass;
                        } else {
                            activeSlide = '';
                        }
                        item += '<li rel="' + i + '" class="' + activeSlide + '"><a href="#" >' + i + '</a></li>';
                    });
                    return item;
                }
            };
        </script>
        <style type="text/css">
			ol, ul {
                list-style: none;
                margin: 0;
                padding: 0;
            }
			.m7_carousel {
                height:280px;
                width:294px;
                overflow:hidden;
                position:relative;
            }
            .m7_carousel img {
                height:253px;
                width:294px;
            }
            .m7_carousel ul{
                overflow:hidden;
                position:absolute;
            }
            .m7_carousel ul li,
            .m7_carouselNav li{
                float:left;
            }
            .m7_carouselNav{
                position:absolute;
                bottom:0;
            }
            .m7_itemOn{
                border:solid 1px red;
            }
            #contentWrapper .m7_carouselNav a {
                background: none;
                margin:0;
                padding:0;
            }
		</style>
	</head>
	<body>
		<h1>Simple jQurey Carousel</h1>
        <div class="carousel">
            <ul>
                <li><img src="http://farm4.static.flickr.com/3513/5835858015_2339a3582e.jpg" alt="image of stuff" /></li>
                <li><img src="http://farm3.static.flickr.com/2484/3931021148_f21883424a.jpg" alt="image of stuff" /></li>
                <li><img src="http://farm7.static.flickr.com/6131/5980825500_729949bed6.jpg" alt="image of stuff" /></li>
                <li><img src="http://farm4.static.flickr.com/3200/5834284532_21c8d98419.jpg" alt="image of stuff" /></li>
            </ul>
        </div>
	</body>
</html>
