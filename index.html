<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-gb" xml:lang="en-gb">
    <head>
        <title>Simple jQuery Carousel</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js" type="text/javascript"></script>
        <script type="text/javascript">

        (function( $ ){
            
            var methods = {
                init : function( options ) {
                    // Create some defaults, extending them with any options that were provided
                    var settings = $.extend( {
                        'start'         : 1,                // carousel start slide
                        'scrollDelay'   : 500,              // auto scroll delay, 0 = off
                        'itemView'      : 2,                // porthole width
                        'itemWidth'     : 200,              // carousel item width
                        'itemHeight'    : 'auto',           // carousel item height
                        'overlap'       : 100,              // offset carousel to see previous/next panel 50% itemWidth
                        'fwdButton'     : 'fwd',            // carousel forward button text
                        'revButton'     : 'rev',            // carousel reverse button text
                        'navClass'      : 'carouselNav',    // carousel navigation class
                        'itemOnClass'   : 'active'          // carousel navigation active item class
                    }, options);
                    
                    return this.each(function(){
                        
                        var $this = $(this);
                        $this.data('activeSlide', 0);
                        $this.data('navPosition', 0);
                        $this.data('coreLength', $this.children().length);

                        methods.buildCarousel($this, settings);
                        if (settings.scrollDelay > 499 ) { $this.timer = setInterval(function () { methods.scroll($this, settings) }, settings.scrollDelay); };
                    });
                },

                buildCarousel : function($this, settings) {
                    $this.css({
                        'width': settings.itemWidth * settings.length,
                        'height': settings.itemHeight,
                        'position': 'relative',
                        'margin-left': settings.overlap
                    });
                    $this.wrap('<div>');
                    $this.parent().css({
                        'width': settings.itemWidth * settings.itemView,
                        'height': settings.itemHeight,
                        'border': 'solid 2px red',
                        'position': 'relative',
                        'margin': '0 auto',
                        'overflow': 'hidden'
                    });
                    this.buildNav($this, settings);
                },

                buildNav : function($this, settings) {
                    var fwd, rev, navWidth = 4,
                        list = $("<ol/>", {
                            'class': settings.navClass
                        }).appendTo($this.parent());

                    // add jump links
                    $this.children().each(function (i) {
                        var item, active = '';

                        if(i === (settings.start -1)) {
                            active = settings.itemOnClass;
                            $this.data("navPosition", settings.start -1);
                        }

                        $(this).attr('rel', i).css({
                            'width' : settings.itemWidth,
                            'height' : settings.itemHeight
                        });

                        item = $("<li/>", {
                            rel: i,
                            'class':active
                        }).appendTo(list);

                        $("<a/>", {
                            text: (i + 1),
                            href: '#',
                            rel: i,
                            click: function (e) { this.jump(e, $this, $(this), settings); }
                        }).appendTo(item);
                    });

                    // shuffle forward link
                    fwd = $("<li/>", {
                        rel: 'fwd'
                    }).appendTo(list);
                    
                    $("<a/>", {
                        text: settings.fwdButton,
                        href: '#',
                        rel: 'fwd',
                        click: function (e) { this.itterate(e, $this, $(this), settings); }
                    }).appendTo(fwd);

                    // shuffle back link
                    rev = $("<li/>", {
                        rel: 'rev'
                    }).prependTo(list);
                    
                    $("<a/>", {
                        text: settings.revButton,
                        href: '#',
                        rel: 'rev',
                        click: function (e) { this.itterate(e, $this, $(this), settings); }
                    }).appendTo(rev);

                    list.children().each(function () {
                        navWidth += $(this).width();
                    });
                    list.css({
                        'width': navWidth
                    });
                    this.prepareCarousel($this, settings);
                },
                prepareCarousel : function ($this, settings) {
                    var $items = $this.children(),
                        pre = $items.clone().removeAttr('rel').addClass('clone'),
                        post = $items.clone().removeAttr('rel').addClass('clone');

                    $this.append(pre);
                    $this.prepend(post);
                    
                    $this.css('width', ($this.children().length * settings.itemWidth));
                    
                    $this.data('activeSlide', (settings.start - 1) + $this.data('coreLength'));
                    
                    this.moveCarousel($this, settings,  $this.data('activeSlide'), $this.data("navPosition"));
                },
                position : function ($this, settings) {
                    position = $this.data('activeSlide');
                    coreLength = $this.data("coreLength");
                    
                    // move forward reset
                    if (position > ($this.children().length - coreLength) - 1) {
                        position = coreLength;
                        $this.children().css('left', -(position - 1) * settings.itemWidth);
                        $this.data('activeSlide', position );
                    }
                    // move back reset
                    if (position < coreLength) {
                       position = position + coreLength;
                       $this.children().css('left', -(position + 1) * settings.itemWidth);
                       $this.data('activeSlide', position);
                    }
                    
                    // scroll into position
                    var v = -settings.itemWidth * position;
                    $this.children().animate({
                        'left': v
                    }).css('position', 'relative');
                },

                setNav: function ($this, settings) {
                    var navPosition = $this.data("navPosition");
                    if (navPosition < 0) {
                        navPosition = $this.data('coreLength') -1 ;
                        $this.data('navPosition', navPosition);
                    }
                    if (navPosition > $this.data('coreLength') - 1) {
                        navPosition = 0;
                        $this.data('navPosition', 0);
                    }

                    $this.parent().find('ol li').removeClass(settings.itemOnClass);
                    $this.parent()
                        .find('ol li[rel="' + navPosition + '"]')
                        .addClass(settings.itemOnClass);
                },

                itterate: function (event, $this, clicked, settings) {
                    event.preventDefault();
                    methods.scrollStop($this.timer);
                    
                    // calculate move direction
                    var navPosition = $this.data('navPosition'),
                        activeSlide = $this.data('activeSlide');
                    if (clicked.attr('rel') === 'fwd') {
                        this.moveCarousel($this, settings,  activeSlide + 1, navPosition + 1);
                    } else {
                        this.moveCarousel($this, settings,  activeSlide - 1, navPosition - 1);
                    }
                    this.position($this, settings);
                    this.setNav($this, settings);
                },
                
                jump: function (event, $this, clicked, settings) {
                    event.preventDefault();
                    methods.scrollStop($this.timer);

                    // calculate jump direction
                    var target = parseInt(clicked.attr('rel'), 10) + $this.data('coreLength'),
                        activeSlide = $this.data('activeSlide');
                    if (activeSlide !== target) {
                        this.moveCarousel($this, settings,  target, (target - $this.data('coreLength')));
                    }
                },

                moveCarousel: function ($this, settings, activeSlide ,navPosition){
                    $this.data('activeSlide', activeSlide);
                    $this.data('navPosition', navPosition);
                    this.position($this, settings);
                    this.setNav($this, settings);
                },

                scroll: function ($this, settings) {
                    this.moveCarousel($this, settings,  $this.data('activeSlide') + 1, $this.data('navPosition') + 1);
                },
                
                scrollStop: function (timer) {
                    // to be called when you want to stop the carousel
                    clearInterval(timer);
                }
            };

            $.fn.carousel = function( method ) { 
                // Method calling logic
                if (methods[method]) {
                    return methods[method].apply( this, Array.prototype.slice.call(arguments, 1 ));
                } else if ( typeof method === 'object' || ! method ) {
                    return methods.init.apply( this, arguments);
                } else {
                    $.error( 'Method ' +  method + ' does not exist on jQuery.carousel' );
                } 
            };
        })( jQuery );

        </script>
        <script type="text/javascript">
            $(window).load(function () {
                $('.carousel').carousel({ 
                    'scrollDelay'     : 5000
                });
            });
        </script>
        <style type="text/css">
            ol, ul {
                list-style: none;
                margin: 0;
                padding: 0;
            }
            .carousel ul{
                overflow:hidden;
                position:absolute;
            }
            .carousel li:nth-child(even) {
                background-color: #ccc;
            }
            .carousel li h1 {
                text-align: center;
            }

            .carouselNav {
                overflow:hidden;
            }
            .carousel li,
            .carouselNav li{
                float:left;
            }
            .carouselNav{
                margin:0 auto;
            }
            .active{
                border:solid 1px red;
            }
            .carouselNav a {
                background: none;
                margin:0;
                padding:5px;
            }
        </style>
    </head>
    <body>
        <h1>infinate jQurey Carousel</h1>
        <article>
            <ul class="carousel">
                <li><h1>Slide 1</h1></li>
                <li><h1>Slide 2</h1></li>
                <li><h1>Slide 3</h1></li>
                <li><h1>Slide 4</h1></li>
                <li><h1>Slide 5</h1></li>
                <li><h1>Slide 6</h1></li>
                <li><h1>Slide 7</h1></li>
                <li><h1>Slide 8</h1></li>
                <li><h1>Slide 9</h1></li>
                <li><h1>Slide 10</h1></li>
            </ul>
        </article>
        <article>
            <ul class="carousel">
                <li><h1>Slide 1</h1></li>
                <li><h1>Slide 2</h1></li>
                <li><h1>Slide 3</h1></li>
                <li><h1>Slide 4</h1></li>
                <li><h1>Slide 5</h1></li>
                <li><h1>Slide 6</h1></li>
                <li><h1>Slide 7</h1></li>
                <li><h1>Slide 8</h1></li>
            </ul>
        </article>
        <article>
            <ul class="carousel">
                <li><h1>Slide 1</h1></li>
                <li><h1>Slide 2</h1></li>
                <li><h1>Slide 3</h1></li>
                <li><h1>Slide 4</h1></li>
                <li><h1>Slide 5</h1></li>
                <li><h1>Slide 6</h1></li>
            </ul>
        </article>
    </body>
</html>
